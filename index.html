<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Multi-Chain NFT Swap — Intent Generator</title>
</head>
<body>
  <style>:root{
  --bg:#070707; /* deep black */
  --card:#0f0f10; /* slightly off-black */
  --muted:#efefef; /* soft white */
  --text:#ffffff; /* bright white */
  --accent:#d62828; /* accessible strong red (WCAG friendly) */
  --accent-strong:#9b1f1f; /* darker red for hover */
  --surface:#121213;
  --success:#22c55e;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  background: linear-gradient(180deg,var(--bg),#0b0b0b 60%);
  color:var(--text);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:36px;
}

.container{
  width:100%;
  max-width:820px;
}

/* HERO */
.hero{padding:48px 20px;text-align:center}
.hero-title{font-size:2rem;margin:0;color:var(--text);line-height:1.05}
.hero-sub{color:var(--muted);margin-top:10px}
.hero-cta{margin-top:18px}
.btn-primary-outline{background:transparent;border:2px solid var(--accent);color:var(--accent);padding:10px 16px;border-radius:10px;font-weight:700;cursor:pointer;transition:all .16s ease}
.btn-primary-outline:hover{background:var(--accent);color:var(--text);transform:translateY(-3px);box-shadow:0 12px 40px rgba(214,40,40,0.12)}

/* rotator */
#rotator{display:inline-block;position:relative;padding-left:8px}
#rotator:after{content:"";display:inline-block;width:2px;height:18px;background:var(--accent);margin-left:8px;vertical-align:middle;animation:blink 1s steps(2,end) infinite}
@keyframes blink{50%{opacity:0}}

/* reveal animation for form */
.form-hidden{opacity:0;transform:translateY(18px) scale(.995);pointer-events:none}
.form-visible{opacity:1;transform:none;pointer-events:auto;transition:opacity .42s ease,transform .42s cubic-bezier(.2,.9,.3,1)}


.site-header{margin-bottom:18px}
.site-header h1{margin:0;font-size:1.6rem;color:var(--text);font-weight:600}
.lead{color:var(--muted);margin-top:6px}

.card{
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.04));
  border:1px solid rgba(255,255,255,0.03);
  padding:22px;
  border-radius:12px;
  box-shadow:0 8px 30px rgba(0,0,0,0.7);
}

form h2{margin:0 0 12px 0;font-size:1.1rem}
fieldset{border:none;padding:0;margin:0}
label{display:block;margin-top:12px;color:var(--muted);font-size:0.9rem}
input[type=text], select{width:100%;padding:10px 12px;margin-top:6px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text)}
input::placeholder{color:#9a9a9a}

input:focus, select:focus{outline:2px solid rgba(230,57,70,0.12);box-shadow:0 4px 18px rgba(230,57,70,0.06)}

.form-actions{display:flex;justify-content:flex-end;margin-top:16px}
.btn-primary{background:linear-gradient(180deg,var(--accent),var(--accent-strong));border:none;color:var(--text);padding:10px 14px;border-radius:8px;font-weight:700;cursor:pointer;transition:transform .12s ease,background .12s ease,box-shadow .12s ease}
.btn-primary:hover{background:linear-gradient(180deg,var(--accent-strong),#7d1515);transform:translateY(-2px);box-shadow:0 12px 40px rgba(214,40,40,0.14)}

.output{margin-top:18px;padding:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));border-radius:8px;border:1px solid rgba(255,255,255,0.02);font-family:Consolas,monospace;font-size:0.9rem;color:#f0f0f0}
.output h3{color:var(--accent);margin:0 0 8px 0}
.output h3{margin:0 0 8px 0}
.output pre{white-space:pre-wrap;word-break:break-word;margin:0}

.copy-row{display:flex;gap:8px;align-items:center;margin-top:12px}
.copy-btn{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:8px 10px;border-radius:8px;cursor:pointer;transition:background .12s ease,border-color .12s ease,color .12s ease,transform .12s ease}
.copy-btn:hover{transform:translateY(-2px);border-color:rgba(255,255,255,0.06)}
.copy-btn.success{border-color:var(--success);color:var(--success);background:rgba(34,197,94,0.06)}

/* download/share buttons in output */
.action-btn{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:8px 10px;border-radius:8px;cursor:pointer}
.action-btn:hover{background:rgba(255,255,255,0.02);border-color:rgba(255,255,255,0.08)}

/* typing animation: subtle pulse when typing in input */
@keyframes typingPulse{0%{box-shadow:0 0 0 0 rgba(214,40,40,0)}50%{box-shadow:0 0 0 6px rgba(214,40,40,0.06)}100%{box-shadow:0 0 0 0 rgba(214,40,40,0)}}
.typing{animation:typingPulse 1.2s ease-in-out infinite}

input.typing, select.typing{animation:typingPulse 1.2s ease-in-out infinite}

.site-footer{margin-top:12px;color:var(--muted);font-size:0.85rem;text-align:right}

@media (max-width:520px){
  .form-actions{justify-content:stretch}
  .btn-primary{width:100%}
}

/* subtle accent animation */
@keyframes popIn{from{opacity:0;transform:translateY(6px) scale(.995)}to{opacity:1;transform:none}}
.card{animation:popIn .28s ease both}</style>
  <main class="container">
    <section class="hero" id="heroSection">
      <h1 class="hero-title">MultiChain <span id="rotator">NFT Swap</span></h1>
      <p class="hero-sub">Securely propose, share and discover cross-chain NFT swap intents.</p>
      <div class="hero-cta">
        <button id="showFormBtn" class="btn-primary-outline">Get started</button>
      </div>
    </section>

    <section class="card form-card form-hidden" id="formCard" aria-hidden="true">
      <form id="swapForm" aria-labelledby="formTitle">
        <h2 id="formTitle">Create Swap Intent</h2>

        <fieldset>
          <legend>NFT Details</legend>

          <label for="nftId">NFT Identifier</label>
          <input type="text" id="nftId" name="nftId" placeholder="#1123 or token address" required>

          <label for="currentChain">Current Chain</label>
          <select id="currentChain" name="currentChain" required>
            <option value="polygon">Polygon</option>
            <option value="ethereum">Ethereum</option>
            <option value="solana">Solana</option>
          </select>

          <label for="targetChain">Target Chain</label>
          <select id="targetChain" name="targetChain" required>
            <option value="ethereum">Ethereum</option>
            <option value="polygon">Polygon</option>
            <option value="solana">Solana</option>
          </select>

          <label for="desiredType">Desired NFT / Notes</label>
          <input type="text" id="desiredType" name="desiredType" placeholder="Optional — e.g., Rare Art, 1/1 edition">
        </fieldset>

        <div class="form-actions">
          <button type="submit" class="btn-primary">Create Intent</button>
        </div>
      </form>

      <div id="output" class="output" aria-live="polite"></div>
    </section>

    <footer class="site-footer">
      <small>Cipher Craft</small>
    </footer>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
  <script>const form = document.getElementById('swapForm');
const output = document.getElementById('output');

// Hero rotator and staged reveal (no AOS)
const rotatorEl = document.getElementById('rotator');
const phrases = [
  'NFT Swap',
  'Cross-Chain Offers',
  'Trustless Intent',
  'Atomic Proposals'
];
let rotIdx = 0;
function rotatePhrase(){
  rotIdx = (rotIdx + 1) % phrases.length;
  rotatorEl.classList.add('fading');
  setTimeout(()=>{ rotatorEl.textContent = phrases[rotIdx]; rotatorEl.classList.remove('fading'); }, 220);
}
let rotInterval = setInterval(rotatePhrase, 2200);

const showFormBtn = document.getElementById('showFormBtn');
const formCard = document.getElementById('formCard');
function revealForm(){
  if(!formCard) return;
  formCard.classList.remove('form-hidden');
  formCard.classList.add('form-visible');
  formCard.setAttribute('aria-hidden','false');
  // stop rotating after reveal
  clearInterval(rotInterval);
}
// auto reveal after 3s
setTimeout(revealForm, 3000);
if(showFormBtn) showFormBtn.addEventListener('click', revealForm);

function normalizeChain(value){
  if(!value) return '';
  return String(value).trim().toLowerCase();
}

function renderIntent(intent){
  const json = JSON.stringify(intent, null, 2);
  output.innerHTML = `
    <h3>Generated Intent</h3>
    <pre id="intentJson">${json}</pre>
    <div class="copy-row">
  <button id="copyBtn" class="copy-btn">Copy JSON</button>
  <button id="downloadBtn" class="action-btn">Download</button>
  <button id="shareBtn" class="action-btn">Copy Link</button>
  <button id="clearBtn" class="copy-btn">Clear</button>
    </div>
  `;

  document.getElementById('copyBtn').addEventListener('click', async () => {
    try{
      await navigator.clipboard.writeText(json);
      const btn = document.getElementById('copyBtn');
      btn.classList.add('success');
      btn.textContent = 'Copied';
      setTimeout(()=>{btn.classList.remove('success');btn.textContent='Copy JSON'}, 2000);
    }catch(err){
      alert('Unable to copy to clipboard');
    }
  });

  document.getElementById('clearBtn').addEventListener('click', ()=>{ output.innerHTML=''; });
  document.getElementById('downloadBtn').addEventListener('click', ()=>{
    const blob = new Blob([json], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `nft-intent-${Date.now()}.json`;
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
  });

  document.getElementById('shareBtn').addEventListener('click', async ()=>{
    // Create a short data URL with the JSON encoded as base64 for copy/share
    try{
      const encoded = encodeURIComponent(json);
      const shareUrl = `${location.origin}${location.pathname}?intent=${encoded}`;
      await navigator.clipboard.writeText(shareUrl);
      const btn = document.getElementById('shareBtn');
      btn.textContent = 'Link Copied';
      setTimeout(()=>btn.textContent='Copy Link',2000);
    }catch(err){
      alert('Unable to copy share link');
    }
  });
  // refresh AOS so newly inserted elements animate
  if(window.AOS && typeof window.AOS.refresh === 'function'){
    window.AOS.refresh();
  }
}

form.addEventListener('submit', function(e){
  e.preventDefault();
  const nftId = (document.getElementById('nftId').value || '').trim();
  const currentChain = normalizeChain(document.getElementById('currentChain').value);
  const targetChain = normalizeChain(document.getElementById('targetChain').value);
  const desiredType = (document.getElementById('desiredType').value || '').trim();

  if(!nftId){
    output.textContent = 'Please provide an NFT identifier.';
    return;
  }
  if(currentChain === targetChain){
    output.textContent = 'Current chain and target chain must be different.';
    return;
  }

  const intent = {
    version: '1.0',
    type: 'NFT_SWAP',
    from: { nftId, chain: currentChain },
    to: { desiredType: desiredType || null, chain: targetChain },
    createdAt: new Date().toISOString()
  };

  renderIntent(intent);
});

// Typing indicator: add .typing while user is actively inputting
const inputs = Array.from(document.querySelectorAll('input[type=text], select'));
let typingTimers = new Map();
inputs.forEach(el=>{
  el.addEventListener('input', ()=>{
    el.classList.add('typing');
    if(typingTimers.has(el)) clearTimeout(typingTimers.get(el));
    const t = setTimeout(()=>{ el.classList.remove('typing'); typingTimers.delete(el); }, 900);
    typingTimers.set(el, t);
  });
});

// If page loaded with an intent query param, auto-populate
function tryLoadIntentFromQuery(){
  try{
    const params = new URLSearchParams(location.search);
    const encoded = params.get('intent');
    if(!encoded) return;
    const json = decodeURIComponent(encoded);
    const intent = JSON.parse(json);
    renderIntent(intent);
  }catch(e){
    // ignore malformed param
  }
}
tryLoadIntentFromQuery();</script>
</body>
</html>